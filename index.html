<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Leaderboard</title>
<meta name="color-scheme" content="dark">
<style>
  /* ========= Liquid Glass — Dark Only ========= */
  :root{
    --bg: #0a0d13;
    --ink: #eaf0ff;
    --muted:#a6b0c6;
    --line: rgba(255,255,255,.18);
    --radius: 18px;
    --shadow: 0 20px 60px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  body{
    margin:0; color:var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background:
      radial-gradient(900px 900px at 80% -20%, rgba(110,168,254,.25), transparent 60%),
      radial-gradient(900px 900px at -20% 120%, rgba(123,218,167,.22), transparent 60%),
      var(--bg);
    overflow-x:hidden;
  }
  .blob{position:fixed; filter: blur(80px); opacity:.5; z-index:-1;}
  .b1{top:-10vh; left:-10vw; width:60vw; height:60vh; background:#6ea8fe33; border-radius:50%;}
  .b2{bottom:-15vh; right:-10vw; width:55vw; height:55vh; background:#7bdaa733; border-radius:40% 60% 50% 50% / 50% 35% 65% 50%;}
  .wrap{max-width:1080px; margin:0 auto; padding:28px 20px;}

  .glass{
    background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
    border: 1px solid var(--line);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(18px) saturate(140%);
    -webkit-backdrop-filter: blur(18px) saturate(140%);
  }

  /* ——— Top bar (search + stats) ——— */
  .bar{display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin:0 0 20px}
  .pill{display:flex; align-items:center; gap:10px; padding:10px 14px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.05)}
  input{
    padding:12px 14px; border-radius:999px; border:1px solid var(--line);
    background:rgba(255,255,255,.05); color:var(--ink); outline:none; min-width:280px;
  }
  input:focus{box-shadow:0 0 0 6px rgba(110,168,254,.20)}
  .stats{display:flex; gap:10px; flex-wrap:wrap}
  .stat{padding:10px 14px; border:1px solid var(--line); border-radius:12px; background:rgba(255,255,255,.04)}
  .stat .lbl{font-size:12px; color:var(--muted)}
  .stat .val{font-weight:700; font-variant-numeric: tabular-nums}

  /* ——— Table ——— */
  .panel.glass{padding:0; overflow:hidden}
  .head{padding:14px 16px; border-bottom:1px solid var(--line); display:flex; gap:12px; align-items:center; justify-content:space-between}
  .muted{color:var(--muted)}
  .table-wrap{overflow:auto}
  table{width:100%; border-collapse:collapse; min-width:640px}
  thead th{
    text-align:left; font-size:12px; color:var(--muted); padding:12px 16px;
    position:sticky; top:0; background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); backdrop-filter: blur(10px);
    border-bottom:1px solid var(--line);
    letter-spacing:.06em; text-transform:uppercase;
  }
  tbody td{padding:14px 16px; border-top:1px solid var(--line)}
  tbody tr{transition: background .2s}
  tbody tr:hover{background:rgba(255,255,255,.04)}
  .rank{width:80px; font-variant-numeric: tabular-nums}
  .num{font-variant-numeric: tabular-nums; text-align:right; font-weight:700}
  footer{margin:18px 0 8px; text-align:center; color:var(--muted); font-size:12px}
</style>
</head>
<body>
  <!-- Background blobs -->
  <div class="blob b1"></div>
  <div class="blob b2"></div>

  <div class="wrap">
    <!-- Minimal layout (no big page title) -->
    <div class="bar">
      <div class="pill">
        <span>🔎</span>
        <input id="search" placeholder="Search username…" />
      </div>
      <div class="stats">
        <div class="stat"><div class="lbl">Players</div><div class="val" id="sPlayers">0</div></div>
        <div class="stat"><div class="lbl">Total Points</div><div class="val" id="sTotal">0</div></div>
        <div class="stat"><div class="lbl">Top Player</div><div class="val" id="sTop">—</div></div>
        <div class="stat"><div class="lbl">Last Updated</div><div class="val" id="sUpdated">—</div></div>
      </div>
    </div>

    <section class="panel glass">
      <div class="head">
        <div class="muted">Leaderboard</div>
        <div class="muted">PRO TIP: Daily Quests Give You Extra Points</div>
      </div>
      <div class="table-wrap">
        <table aria-label="Leaderboard">
          <thead>
            <tr>
              <th class="rank">Rank</th>
              <th>Username</th>
              <th class="num">Points</th>
              <th>Updated</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </section>

    <footer>Mini Box PvP</footer>
  </div>

<script>
/* ===================== EDIT YOUR DATA HERE ===================== */
/*
  Enter a SPECIFIC date + time for each player (local time).
  Accepted formats for each player's `updated` (examples):
    "2025-08-15 21:05:00"   (recommended — local time)
    "2025-08-15T21:05:00"   (ISO without timezone — treated as local)
    A JS Date or timestamp (ms) also works, but strings above are easiest.

  The site will show "x mins ago / hours ago / days ago" based on that timestamp.
  The header "Last Updated" shows the most recent player timestamp.
*/
const DATA = {
  players: [
    { name: "200IQ ACEツ",    points: 8, updated: "2025-08-16 22:10:00" },
    { name: "Dropxyツ",    points: 20, updated: "2025-08-16 22:10:00" },
    { name: "graphic_showing", points: 9, updated: "2025-08-16 22:10:00" },
    { name: "Yassin-2508",   points: 4, updated: "2025-08-16 22:10:00" },
    { name: "RealisticElk3877",   points: 10, updated: "2025-08-16 22:10:00" },
    { name: "kabil100098",   points: 2, updated: "2025-08-16 22:10:00" },
    { name: "vultureZozz",   points: 1, updated: "2025-08-16 22:10:00" },
    { name: "friable-pager45",   points: 1, updated: "2025-08-16 22:10:00" },



  ]
};
/* =============================================================== */

const $ = (q) => document.querySelector(q);
const fmt = (n) => new Intl.NumberFormat().format(n);

let searchQ = '';
let resolved = null;

init();

function init(){
  $('#search').addEventListener('input', e => { searchQ = e.target.value.toLowerCase().trim(); render(); });
  resolved = normalizeData(DATA);   // parse all timestamps ONCE
  render();
  setInterval(updateTimeLabels, 5000); // keep “x mins ago” ticking
}

/* ---------- Parse "YYYY-MM-DD HH:MM[:SS]" or "YYYY-MM-DDTHH:MM[:SS]" as LOCAL time ---------- */
function parseStampLocal(s){
  if (s == null) return null;
  if (typeof s === 'number') return s;
  if (s instanceof Date) return s.getTime();
  s = String(s).trim();

  // "YYYY-MM-DD HH:MM[:SS]" or "YYYY-MM-DDTHH:MM[:SS]"
  const m = s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/);
  if (m) {
    const Y  = +m[1], Mo = +m[2], D  = +m[3],
          H  = +m[4], Mi = +m[5], S  = +(m[6]||0);
    return new Date(Y, Mo-1, D, H, Mi, S, 0).getTime(); // LOCAL time
  }

  // Fallback: let the browser parse (handles full ISO with timezone like 2025-08-16T09:00:00Z)
  const t = Date.parse(s);
  return Number.isNaN(t) ? null : t;
}

function normalizeData(data){
  const players = data.players.map(p => ({
    name: String(p.name),
    points: Number(p.points)||0,
    updatedMs: parseStampLocal(p.updated)
  }));
  return { players };
}

/* ---------- Render ---------- */
function render(){
  // Sort by points desc, then name
  const list = resolved.players.slice()
    .sort((a,b)=> (b.points - a.points) || a.name.localeCompare(b.name));

  const rankMap = new Map(list.map((p,i)=>[p.name, i+1]));
  const filtered = list.filter(p => !searchQ || p.name.toLowerCase().includes(searchQ));

  // Build rows
  const tbody = $('#tbody'); tbody.innerHTML = '';
  filtered.forEach(p => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="rank">#${fmt(rankMap.get(p.name) || 0)}</td>
      <td>${escapeHtml(p.name)}</td>
      <td class="num">${fmt(p.points || 0)}</td>
      <td data-ms="${p.updatedMs ?? ''}"></td>
    `;
    tbody.appendChild(tr);
  });

  // Stats
  $('#sPlayers').textContent = fmt(resolved.players.length);
  $('#sTotal').textContent   = fmt(resolved.players.reduce((s,p)=>s+(p.points||0),0));
  $('#sTop').textContent     = list[0]?.name || '—';

  const mostRecent = list.map(p=>p.updatedMs||0).reduce((a,b)=>Math.max(a,b),0);
  $('#sUpdated').setAttribute('data-ms', mostRecent || '');

  updateTimeLabels();
}

/* ---------- Live “time ago” labels ---------- */
function updateTimeLabels(){
  document.querySelectorAll('[data-ms]').forEach(el => {
    const v = el.getAttribute('data-ms');
    if (!v) { el.textContent = '—'; return; }
    const ms = Number(v);
    if (!Number.isFinite(ms)) { el.textContent = '—'; return; }
    el.textContent = timeAgo(ms);
  });
}

/* ---------- Helpers ---------- */
function timeAgo(ms){
  const diff = Date.now() - ms;
  if (diff < 0) return 'just now';
  const s = Math.floor(diff/1000);
  if (s < 60)  return `${s} sec${s!==1?'s':''} ago`;
  const m = Math.floor(s/60);
  if (m < 60)  return `${m} min${m!==1?'s':''} ago`;
  const h = Math.floor(m/60);
  if (h < 24)  return `${h} hour${h!==1?'s':''} ago`;
  const d = Math.floor(h/24);
  if (d < 7)   return `${d} day${d!==1?'s':''} ago`;
  return new Date(ms).toLocaleString();
}
function escapeHtml(str){ return String(str).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m])); }
</script>
</body>
</html>
